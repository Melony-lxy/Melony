require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packgeB/activityDetail/activityDetail"],{"0317":function(i,t,n){"use strict";(function(i,t){var e=n("47a9");n("6103");e(n("3240"));var o=e(n("6cb4"));i.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"1e45":function(i,t,n){"use strict";(function(i){var e=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=e(n("7ca3"));function a(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.push.apply(n,e)}return n}function r(i){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.default)(i,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))}))}return i}var u={data:function(){return{info:null,show:!1,list:[],post:{name:"",phone:""},id:0,user:!1,price:"免费",isShow:!1,priceIndex:0,detail:{price:""},loginType:""}},onLoad:function(i){this.loginType="小程序端",this.id=i.id,i.user&&(this.user=!0)},onShow:function(){this.getInfo()},onShareAppMessage:function(i){return{title:this.info.name,imageUrl:this.list?this.common.imgUrl(this.list[0].image):"",path:"/packgeB/activityDetail/activityDetail?id="+this.id}},onShareTimeline:function(){return{title:this.info.name,imageUrl:this.list?this.common.imgUrl(this.list[0].image):"",path:"/packgeB/activityDetail/activityDetail?id="+this.id}},methods:{enroll_time:function(){if(null==this.info)return"";var i=new Date(this.info.enroll_time);return"".concat(i.getFullYear(),"年").concat(i.getMonth()+1,"月").concat(i.getDate(),"日")},homeSkip:function(){i.switchTab({url:"/pages/index/index"})},member:function(){i.navigateTo({url:"/packgeB/my/activateNowContent"})},getInfo:function(){var t=this;this.$axios({url:this.$url[120],data:{id:this.id,loginType:this.loginType}}).then((function(n){if(0==n.code){t.list=[],n.data.img.forEach((function(i){t.list.push({image:t.common.imgUrl(i)})})),t.info=n.data;var e=n.data.price;if(t.price=e&&0!==e.length&&0!==Math.max.apply(null,e.map((function(i){return i.price})))?Math.min.apply(null,e.map((function(i){return i.price})))==Math.max.apply(null,e.map((function(i){return i.price})))?"￥"+Math.min.apply(null,e.map((function(i){return i.price}))):"￥"+Math.min.apply(null,e.map((function(i){return i.price})))+"~"+Math.max.apply(null,e.map((function(i){return i.price}))):"免费",e&&(t.detail=e[0]),t.user&&t.info.isApplication)t.signLog();else if(t.user){if(2==t.info.status)return void i.showToast({title:"活动已结束",icon:"none"});if(t.info.number>0&&t.info.applicationCount>=t.info.number)return void i.showToast({title:"活动报名人数已满",icon:"none"});i.navigateTo({url:"/packgeB/activityDetail/application?id="+t.id+"&user=true"})}}}))},commodityChange:function(i){this.priceIndex=i,this.detail=this.info.price[i]},signLog:function(){var t=this;if(!this.info.isLogin)return i.showToast({title:"请登录",icon:"none"}),void setTimeout((function(){i.navigateTo({url:"/packgeA/login/login"})}),1500);this.info.sign_in_time||(1===this.info.applicationStatus?2!=this.info.status?this.$axios({url:this.$url[122],data:{id:this.id}}).then((function(n){0==n.code&&(i.showToast({title:"活动签到成功",icon:"none"}),t.user=!1,t.getInfo())})):i.showToast({title:"活动已结束",icon:"none"}):i.showToast({title:"报名审核中",icon:"none"}))},application:function(){var t=this;this.post.name?this.post.phone?this.isPhone()?(i.showLoading({title:"报名中"}),this.$axios({url:this.$url[121],data:r({id:this.id},this.post)}).then((function(n){0==n.code&&(i.hideLoading(),t.show=!1,i.showToast({title:"报名成功",icon:"none"}),t.getInfo())}))):i.showToast({title:"请输入正确的手机号码",icon:"none"}):i.showToast({title:"请输入联系方式",icon:"none"}):i.showToast({title:"请输入姓名",icon:"none"})},isPhone:function(){return/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/.test(this.post.phone)},sign:function(){i.navigateTo({url:"/packgeB/sign/sign?id="+this.id})},submit:function(){if(!this.info.isLogin)return i.showToast({title:"请登录",icon:"none"}),void setTimeout((function(){i.navigateTo({url:"/packgeA/login/login"})}),1500);this.info.isApplication?i.showToast({title:"活动已报名",icon:"none"}):this.info.end?i.showToast({title:"活动报名时间已截止",icon:"none"}):2!=this.info.status?this.info.number>0&&this.info.applicationCount>=this.info.number?i.showToast({title:"活动报名人数已满",icon:"none"}):this.info.price?this.isShow=!0:i.navigateTo({url:"/packgeB/activityDetail/application?id="+this.id}):i.showToast({title:"活动已结束",icon:"none"})},pay:function(){this.isShow=!1,i.navigateTo({url:"/packgeB/activityDetail/application?id="+this.id+"&index="+this.priceIndex})}}};t.default=u}).call(this,n("df3c")["default"])},"6cb4":function(i,t,n){"use strict";n.r(t);var e=n("c87a"),o=n("a5f3");for(var a in o)["default"].indexOf(a)<0&&function(i){n.d(t,i,(function(){return o[i]}))}(a);n("e7ab");var r=n("828b"),u=Object(r["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);t["default"]=u.exports},"9e4c":function(i,t,n){},a5f3:function(i,t,n){"use strict";n.r(t);var e=n("1e45"),o=n.n(e);for(var a in e)["default"].indexOf(a)<0&&function(i){n.d(t,i,(function(){return e[i]}))}(a);t["default"]=o.a},c87a:function(i,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return e}));var e={uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"d66e"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"31fd"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"aa1b"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"7c31"))}},o=function(){var i=this,t=i.$createElement,n=(i._self._c,i.info?i.enroll_time():null),e=i.info?i.common.content(i.info.content):null,o=i.info?i.common.imgUrl("/static/pageShop/index.png"):null,a=i.info?{"font-size":"28rpx",color:"#666666"}:null,r=i.info?{"font-size":"28rpx",color:"#666666"}:null;i.$mp.data=Object.assign({},{$root:{m0:n,g0:e,g1:o,a0:a,a1:r}})},a=[]},e7ab:function(i,t,n){"use strict";var e=n("9e4c"),o=n.n(e);o.a}},[["0317","common/runtime","common/vendor"]]]);