require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packgeB/activityDetail/payment"],{"0364":function(t,n,i){"use strict";i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return e}));var e={uImage:function(){return i.e("uview-ui/components/u-image/u-image").then(i.bind(null,"31fd"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"203b"))}},a=function(){var t=this,n=t.$createElement,i=(t._self._c,t.common.imgUrl(t.detail.activity.img)),e=t.__map(t.paymentList,(function(n,i){var e=t.__get_orig(n),a=t.common.imgUrl(n.img);return{$orig:e,g1:a}}));t._isMounted||(t.e0=function(n){var i=[],e=arguments.length-1;while(e-- >0)i[e]=arguments[e+1];var a=i[i.length-1].currentTarget.dataset,o=a.eventParams||a["event-params"];n=o.index;return t.payment=n}),t.$mp.data=Object.assign({},{$root:{g0:i,l0:e}})},o=[]},"4a51":function(t,n,i){"use strict";(function(t,n){var e=i("47a9");i("6103");e(i("3240"));var a=e(i("eb10"));t.__webpack_require_UNI_MP_PLUGIN__=i,n(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},8983:function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={WECHAT:1,WECHAT_CH:"微信",ALIPAY:2,ALIPAY_CH:"支付宝"},e={components:{},data:function(){return{id:0,detail:{activity:{},price:0},isios:!1,paymentList:[{id:i.WECHAT,img:"/static/wechat.png",name:i.WECHAT_CH,styles:"width:30rpx;height:30rpx"}],payment:0}},onLoad:function(n){n.id?this.id=n.id:(t.showToast({title:"参数无效",icon:"none"}),t.navigateBack()),this.paymentList=[{id:i.WECHAT,img:"/static/wechat.png",name:i.WECHAT_CH,styles:"width:30rpx;height:30rpx"}]},onShow:function(){var n=this;this.$axios({url:this.$url[123],data:{id:this.id}}).then((function(i){if(0==i.code){var e=i.data;if(0==e.price)return t.showToast({title:"金额免费",icon:"none"}),void t.navigateBack();if(1===e.payment_status)return t.showToast({title:"已支付",icon:"none"}),void t.navigateBack();n.detail=e}})),t.getSystemInfo({success:function(t){"ios"==t.platform?n.$axios({url:n.$url[103]}).then((function(t){n.isios=t.data})):n.isios=!0}})},methods:{goPay:function(){var n=this;t.showLoading({title:"加载中"});var e=this.paymentList[this.payment].id;if(e===i.WECHAT){this.$axios({url:this.$url[124],data:{id:this.id,status:0,openId:t.getStorageSync("openId"),payment:0}}).then((function(i){t.hideLoading(),0===i.code&&n.common.payment(i.data).then((function(t){0===t.code&&n.paymentSuccess()})).catch((function(t){}))})).catch((function(){t.hideLoading()}))}else e===i.ALIPAY?this.$axios({url:this.$url[124],data:{id:this.id,payment:1}}).then((function(n){t.hideLoading(),document.querySelector("body").innerHTML=n.data.resp,document.forms[0].submit()})).catch((function(){t.hideLoading()})):t.hideLoading()},paymentSuccess:function(){t.showModal({title:"提示",content:"支付成功",showCancel:!1,confirmText:"关闭",success:function(n){t.switchTab({url:"/pages/my/my"})}})}}};n.default=e}).call(this,i("df3c")["default"])},"977d":function(t,n,i){},eb10:function(t,n,i){"use strict";i.r(n);var e=i("0364"),a=i("f9ed");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return a[t]}))}(o);i("f490");var c=i("828b"),u=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,"0fb19254",null,!1,e["a"],void 0);n["default"]=u.exports},f490:function(t,n,i){"use strict";var e=i("977d"),a=i.n(e);a.a},f9ed:function(t,n,i){"use strict";i.r(n);var e=i("8983"),a=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(o);n["default"]=a.a}},[["4a51","common/runtime","common/vendor"]]]);