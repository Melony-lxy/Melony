require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packgeB/sectionDetails/sectionDetails"],{"09ff":function(t,e,i){"use strict";i.r(e);var n=i("5813"),a=i("3b17");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("0a4a"),i("90f6");var s=i("828b"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"bf76ec70",null,!1,n["a"],void 0);e["default"]=c.exports},"0a4a":function(t,e,i){"use strict";var n=i("45e2"),a=i.n(n);a.a},"3b17":function(t,e,i){"use strict";i.r(e);var n=i("c760"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"45e2":function(t,e,i){},5813:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uModal:function(){return i.e("uview-ui/components/u-modal/u-modal").then(i.bind(null,"31b2"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"6517"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.playerOptions.sources.length),n=t.ifshow?t.common.imgUrl(t.course.img):null,a=t.details.video_playback?1!=t.details.video_playback.length&&0!=t.details.video_playback.length:null,o=t.details.video_playback&&a?t.details.video_playback.length:null,s=t.details.video_playback&&a&&t.num==o-1?t.details.video_playback.length:null,c=t.common.imgUrl("/static/icon/kj.png"),l=t.common.imgUrl("/static/kjIcon.png");t._isMounted||(t.e0=function(e){t.num--},t.e1=function(e){t.num++}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:a,g3:o,g4:s,g5:c,g6:l}})},o=[]},"90f6":function(t,e,i){"use strict";var n=i("c015"),a=i.n(n);a.a},a290:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("6103");n(i("3240"));var a=n(i("09ff"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},c015:function(t,e,i){},c760:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2ed0"),a={components:{fileItem:function(){i.e("packgeA/components/fileItem").then(function(){return resolve(i("5c88"))}.bind(null,i)).catch(i.oe)},taskItem:function(){i.e("packgeA/components/taskItem").then(function(){return resolve(i("fadc"))}.bind(null,i)).catch(i.oe)},aliplayer:function(){i.e("packgeB/aliplayer").then(function(){return resolve(i("2c2c"))}.bind(null,i)).catch(i.oe)}},data:function(){return{show1:!1,playerOptions:{live:!0,playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[],poster:this.common.imgUrl("/static/images/test.jpg"),notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},globalOptions:{autoplay:!0,controls:!0,controlBar:{remainingTimeDisplay:!1,playToggle:{},progressControl:{},fullscreenToggle:{},volumeMenuButton:{inline:!1,vertical:!0}},techOrder:["html5"],plugins:{}},testCurrent:0,testNavlist:[{name:"客观题"},{name:"主观题"}],tablist:[{name:"教师评价"}],videoIndex:0,videoContext:"",testList:[],testList2:[],taskList:[],current:0,currentName:"教师评价",id:0,course:{},details:{},dataTime:(0,n.getTimeWeex)(0).time,dayResources:{},orderId:0,indexs:0,advance:null,ifshow:!0,videoId:"",showvideo:!1,num:0}},onLoad:function(t){this.getAdvance(),console.log(t),this.id=t.id,t.course&&(this.course=JSON.parse(t.course)),t.orderId&&(this.orderId=t.orderId),t.index&&(this.indexs=t.index),this.getSectionDetail(),this.getTypeList(),this.getTaskList(),this.getTestList()},onPullDownRefresh:function(){this.dataTime=(0,n.getTimeWeex)(0).time,this.getAdvance(),this.videoIndex=0,console.log(this.dataTime),this.getSectionDetail()},watch:{num:function(t,e){this.showvideo=!1,this.$nextTick((function(){this.showvideo=!0,this.videoId=this.details.video_playback[t].video_id}))}},methods:{AddNew:function(){var e=this;""!=this.newreMarks?this.$axios({url:this.$url[109],data:{teacherUid:this.uid,content:this.newreMarks}}).then((function(i){e.newreMarks="",t.showToast({title:"评价成功",icon:"none"}),setTimeout((function(){e.show1=!1}),1e3)})):this.$u.toast("请填写评价")},consulting1:function(t){this.uid=t.uid,this.show1=!0},getSectionDetail:function(){var e=this;this.$axios({url:this.$url[15],data:{id:this.id}}).then((function(i){e.details=i.data,i.data.end?i.data.join_url?(e.ifshow=!1,e.playerOptions.sources=[{type:"application/x-mpegURL",src:i.data.join_url}]):0!=i.data.video_playback.length?(e.getSectionDetails(),e.ifshow=!1):(t.showModal({title:"提示",content:"课程暂未开始"}),e.ifshow=!0,e.getSectionDetails()):e.getSectionDetails()}))},playerStateChanged:function(t){},showToasts:function(e){0==e?t.showToast({icon:"none",title:"这是最后一个视频"}):t.showToast({icon:"none",title:"这是第一个视频"})},endVideo:function(){this.videoIndex<this.details.video_list.length-1&&(this.videoIndex=++this.videoIndex)},getAdvance:function(){var t=new Date((new Date).getTime()+9e5),e=new Date(t);this.advance=e.getFullYear()+"-"+this.common.getNumber(e.getMonth()+1)+"-"+this.common.getNumber(e.getDate())+" "+this.common.getNumber(e.getHours())+":"+this.common.getNumber(e.getMinutes())},changes:function(t){this.testCurrent=t},change:function(t){this.current=t,this.currentName=this.tablist[t].name},getSectionDetails:function(){var e=this;this.$axios({url:this.$url[15],data:{id:this.id}}).then((function(i){0!=e.details.video_playback.length?(e.ifshow=!1,e.showvideo=!0,e.videoId=e.details.video_playback[e.num].video_id):t.showToast({icon:"none",title:"暂未上传视频"}),t.stopPullDownRefresh()}))},getTypeList:function(){var t=this;this.$axios({url:this.$url[16],data:{id:this.id}}).then((function(e){if(0==e.code){if(t.dayResources=e.data,0!=t.dayResources.preview.length){var i=0;t.tablist.forEach((function(t){"预习"==t.name&&i++})),0==i&&t.tablist.push({name:"预习"})}if(0!=t.dayResources.review.length){var n=0;t.tablist.forEach((function(t){"复习"==t.name&&n++})),0==n&&t.tablist.push({name:"复习"})}}}))},getTaskList:function(){var t=this;this.$axios({url:this.$url[21],data:{order_id:this.orderId,section:this.indexs,category:this.testCurrent}}).then((function(e){0==e.code&&(t.testList=e.data.data,t.$axios({url:t.$url[21],data:{order_id:t.orderId,section:t.indexs,category:1}}).then((function(e){if(0==e.code&&(0==e.data.data.length&&(t.testCurrent=1),t.testList2=e.data.data,t.testList.length+t.testList2.length!=0)){var i=0;t.tablist.forEach((function(t){"测验"==t.name&&i++})),0==i&&t.tablist.push({name:"测验"})}})))}))},getTestList:function(){var t=this;this.$axios({url:this.$url[20],data:{order_id:this.orderId,section:this.indexs}}).then((function(e){if(0==e.code&&(t.taskList=e.data.data,0!=t.taskList.length)){var i=0;t.tablist.forEach((function(t){"作业"==t.name&&i++})),0==i&&t.tablist.push({name:"作业"})}}))},getInto:function(){this.details.join_url?this.details.end?t.navigateTo({url:"/packgeA/tencent/tencent?id="+this.id}):this.$u.toast("课程已结束"):this.$u.toast("课程暂未开始")}}};e.default=a}).call(this,i("df3c")["default"])}},[["a290","common/runtime","common/vendor"]]]);