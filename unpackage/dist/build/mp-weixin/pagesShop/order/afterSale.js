require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesShop/order/afterSale"],{"0d57":function(n,e,t){"use strict";t.r(e);var o=t("c562"),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(r);e["default"]=i.a},"3a7e":function(n,e,t){"use strict";(function(n,e){var o=t("47a9");t("6103");o(t("3240"));var i=o(t("633a"));n.__webpack_require_UNI_MP_PLUGIN__=t,e(i.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"43e6":function(n,e,t){},"633a":function(n,e,t){"use strict";t.r(e);var o=t("760f"),i=t("0d57");for(var r in i)["default"].indexOf(r)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(r);t("f855");var u=t("828b"),c=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"5ec94751",null,!1,o["a"],void 0);e["default"]=c.exports},"760f":function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return o}));var o={uImage:function(){return t.e("uview-ui/components/u-image/u-image").then(t.bind(null,"31fd"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"203b"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"7c31"))},uUpload:function(){return t.e("uview-ui/components/u-upload/u-upload").then(t.bind(null,"6570"))},uPopup:function(){return t.e("uview-ui/components/u-popup/u-popup").then(t.bind(null,"aa1b"))}},i=function(){var n=this,e=n.$createElement,t=(n._self._c,n.common.imgUrl(n.info.img)),o=n.priceData(),i=n.isFocus?null:n.common.imgUrl("/static/shop/userInfo/nav12.png"),r=n.isFocus?null:n.common.imgUrl("/static/shop/userInfo/nav12.png"),u=n.common.imgUrl("/static/shop/common/officialAccounts.jpg");n._isMounted||(n.e0=function(e){n.refundCause=!0}),n.$mp.data=Object.assign({},{$root:{g0:t,m0:o,g1:i,g2:r,g3:u}})},r=[]},c562:function(n,e,t){"use strict";(function(n){var o=t("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t("7ca3")),r=t("bd40"),u=t("babc");function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){(0,i.default)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var s={data:function(){return{maxPrice:0,isFocus:!1,show:!1,refundCause:!1,refundCauseList:[],refundInfo:{id:0,infoId:0,describes:"",price:0,reason:"请选择",type:0},action:this.$base_url+"/index/common/uploadFile",info:{},img:[]}},onLoad:function(n){this.refundInfo.id=parseInt(n.orderId),this.refundInfo.infoId=parseInt(n.productId),this.orderInfo(parseInt(n.orderId)),this.returnGoodsReason()},methods:{error:function(){this.info.img="/static/images/default.png"},subscribe:function(){var n=this;(0,u.subscribe)().then((function(e){0===e.code&&(n.show=!e.data)}))},priceData:function(){var n=((100*Number(this.info.unit_price)-100*Number(this.info.discount_amount))/100).toFixed(2);return console.log(n,"price"),n},returnGoodsReason:function(){var n=this;(0,r.returnGoodsReason)().then((function(e){console.log(e,"res"),n.refundCauseList=e.data.reason}))},orderInfo:function(n){var e=this;(0,r.orderInfo)({id:n}).then((function(n){e.info=n.data.product.filter((function(n){return n.id===e.refundInfo.infoId}))[0],e.refundInfo.price=e.info.paid_price,e.maxPrice=e.refundInfo.price}))},submit:function(){var e,t=this.refundInfo;"请选择"!==t.reason?1*t.price>this.maxPrice?n.showToast({icon:"none",title:"请正确填写退款金额,不可大于"+this.maxPrice,duration:2e3}):t.describes?this.img.length?(e=a(a({},this.refundInfo),{},{img:this.img}),(0,r.returnGoods)(e).then((function(e){0===e.code&&(n.showToast({icon:"none",title:"提交成功，等待审核"}),setTimeout((function(){n.reLaunch({url:"/pagesShop/order/afterSaleList"})}),2e3))}))):n.showToast({icon:"none",title:"请上传凭证"}):n.showToast({icon:"none",title:"请补充描述"}):n.showToast({icon:"none",title:"请选择退款原因",duration:2e3})},refund:function(n){this.refundInfo.type="only"===n?1:0,this.isFocus=!0},uploaded:function(n){var e=[];n.forEach((function(n){e.push(n.response.data.url)})),console.log(e,"data"),this.img=e},changeCause:function(n){this.refundInfo.reason=n,this.refundCause=!1}}};e.default=s}).call(this,t("df3c")["default"])},f855:function(n,e,t){"use strict";var o=t("43e6"),i=t.n(o);i.a}},[["3a7e","common/runtime","common/vendor"]]]);