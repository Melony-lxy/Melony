require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packgeA/components/y-video-slide/y-video-slide"],{"0862":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={props:{videoHeight:{type:String,default:"100vh"},data:{type:Array,default:function(){return[]}},videoIndex:{type:[Number,String],default:"0"},pageNum:Number,limitNum:Number,showfollowup:Boolean},data:function(){return{iconfollowup:!0,numberwhich:0,videoList:this.data,videoRealHeight:0,fabulousArr:[],clickTimer:null,clickTime:0,windowHeight:t.getSystemInfoSync().windowHeight||window.innerHeight,transition:"none",startY:0,moveY:0,startTime:0,marginTop:0,fixMarginTop:0,moveDirection:"",currentIndex:0,currentVideo:null,currentComment:[],currentStatus:"play",commontShow:!1,fabulousTime:0,fabulousTimer:null,showInput:!1,commentPlaceholder:"说点好听的～",replyType:"video",replyObj:{},replyIndex:0,replyParentIndex:0,replyContent:"",informationlist:"",page:0}},watch:{data:{handler:function(t){this.videoList=t},deep:!0}},mounted:function(){var i=this,e=t.createSelectorQuery().in(this);e.select(".video-item-box").boundingClientRect((function(t){i.videoRealHeight=t.height})).exec(),this.currentVideo=t.createVideoContext(this.videoList[0].id,this),this.currentComment=this.videoList[0].commentObj,this.clearFabulousArr(),this.getpeople();var o=t.createVideoContext(this.videoList[0].id,this);this.currentStatus="pause",o.pause()},methods:{gocenter:function(i){void 0==i.commentId?t.navigateTo({url:"/packgeA/PersonalCenter/PersonalCenter?uid="+i.user}):t.navigateTo({url:"/packgeA/PersonalCenter/PersonalCenter?uid="+i.commentId})},getUrl:function(i){t.navigateTo({url:i})},getpeople:function(){var t=this;this.$axios({url:this.$url[79]}).then((function(i){0==i.code&&(t.informationlist=i.data)}))},toggleFollow:function(i){this.$axios({url:this.$url[51],data:{changeStatus:i.isFollow,id:Number(i.id),status:0,type:0}}).then((function(e){0==e.code&&(i.isFollow=0==i.isFollow?1:0,1==i.isFollow?(i.FollowCount++,t.showToast({title:"收藏成功",icon:"none"})):i.FollowCount--)}))},videoError:function(i,e){t.showToast({title:"视频出错了!",icon:"none"})},touchStart:function(t){this.transition="none",this.startY=t.touches[0].pageY,this.startTime=(new Date).getTime()},touchMove:function(t){if(!this.commontShow)if(this.moveY=t.touches[0].pageY,this.moveY>this.startY){var i=this.fixMarginTop+this.moveY-this.startY;0==this.currentIndex||(this.marginTop=i),this.moveDirection="up"}else{if(0==this.videoList.length)return;var e=this.fixMarginTop-this.startY+this.moveY;if(this.currentIndex==this.videoList.length-1){var o=-this.currentIndex*this.videoRealHeight-50;this.marginTop=e<o?o:e}else this.marginTop=e;this.moveDirection="down"}},touchEnd:function(t){if(this.transition="all .2s",0==this.currentIndex&&this.marginTop>=45)return this.$emit("refresh"),void(this.marginTop=0);if(this.currentIndex==this.videoList.length-1&&this.marginTop<this.fixMarginTop-45)return this.marginTop=this.fixMarginTop,void this.$emit("loadMore");var i=(new Date).getTime()-this.startTime,e=this.moveY>0&&Math.abs(this.moveY-this.startY)>50&&i<500,o=this.moveY>0&&Math.abs(this.moveY-this.startY)>this.videoRealHeight/3;e||o?"up"==this.moveDirection?(0==this.currentIndex?this.marginTop=0:(this.marginTop=this.fixMarginTop+this.videoRealHeight,this.currentIndex=this.currentIndex-1,this.$emit("update:videoIndex",this.currentIndex),this.currentComment=this.videoList[this.currentIndex].commentObj,this.videoPlayChange()),this.page>0&&(this.page--,this.$emit("setpage",this.page))):(this.currentIndex==this.videoList.length-1?this.marginTop=this.fixMarginTop:(this.marginTop=this.fixMarginTop-this.videoRealHeight,this.currentIndex=this.currentIndex+1,this.$emit("update:videoIndex",this.currentIndex),this.currentComment=this.videoList[this.currentIndex].commentObj,this.videoPlayChange()),this.page++,this.$emit("setpage",this.page)):this.marginTop=this.fixMarginTop,this.fixMarginTop=this.marginTop,this.startY=0,this.moveY=0},videoPlayChange:function(){this.stopOtherVideo();var i=t.createVideoContext(this.videoList[this.currentIndex].id,this);this.currentVideo=i,this.currentStatus="play",this.$nextTick((function(){this.currentVideo.play()}))},stopOtherVideo:function(){var i=this;this.videoList.map((function(e){var o=t.createVideoContext(e.id,i);o.seek(1),o.pause()}))},pauseVideo:function(t,i){var e=this;if(this.currentVideo)if(this.commontShow)this.commontShow=!1;else{clearTimeout(this.clickTimer);var o=(new Date).getTime(),n=o-this.clickTime;n<300?(i.isFabulous||this.$emit("fabulous",i,!0),this.dbClickAnimation(t)):this.clickTimer=setTimeout((function(){t.preventDefault(),t.stopPropagation(),"play"==e.currentStatus?(e.currentVideo.pause(),e.currentStatus="pause"):(e.currentVideo.play(),e.currentStatus="play")}),300),this.clickTime=(new Date).getTime()}},fabulousDbClick:function(t){clearTimeout(this.fabulousTimer);var i=(new Date).getTime(),e=i-this.fabulousTime;e<300&&this.dbClickAnimation(t),this.fabulousTime=(new Date).getTime()},dbClickAnimation:function(t){var i=this,e=Math.round(40*Math.random()+5);this.fabulousArr.push({left:t.detail.x-25+"px",top:t.detail.y-25+"px",transform:"rotate("+(e%2==0?e:-e)+"deg)",createTime:(new Date).getTime()});var o=this.fabulousArr.length>0?this.fabulousArr.length-1:0;setTimeout((function(){i.$set(i.fabulousArr,o,Object.assign(i.fabulousArr[o],{opacity:0,transform:"scale(3) "+i.fabulousArr[o].transform})),setTimeout((function(){i.fabulousArr.splice(o,1,null)}),1e3)}),500),this.videoList[this.currentIndex].isFabulous||this.$set(this.videoList,this.currentIndex,Object.assign(this.videoList[this.currentIndex],{isFabulous:1,fabulousCount:this.videoList[this.currentIndex].isFabulous+1}))},clearFabulousArr:function(){var t=this,i=this.fabulousArr.map((function(t,i){if("0"==t.opacity)return i}));i.forEach((function(i){t.fabulousArr.splice(i,1)}))},toggleFabulous:function(t,i){this.$emit("fabulous",t,!t.isFabulous),this.$set(this.videoList,i,Object.assign(t,{isFabulous:t.isFabulous?0:1,fabulousCount:t.isFabulous?t.fabulousCount-1:t.fabulousCount+1})),this.$axios({url:this.$url[51],data:{changeStatus:t.isFabulous?0:1,id:Number(t.id),status:1,type:0}}).then((function(t){}))},followUp:function(i,e){var o=this,n="";n=0==e.followup?0:1,this.$axios({url:this.$url[51],data:{id:e.commentId,status:3,changeStatus:n}}).then((function(i){0==i.code&&(o.iconfollowup=!1,0==n?(o.videoList.forEach((function(t){t.commentId==e.commentId&&(t.followup=!0)})),t.showToast({title:"关注成功",icon:"none"})):(o.videoList.forEach((function(t){t.commentId==e.commentId&&(t.followup=!1)})),t.showToast({title:"取消关注",icon:"none"})),o.iconfollowup=!0),console.log(i)}))},commontAdd:function(){this.commontShow=!0,this.replyType="video",this.replyObj=this.currentVideo},shareFunc:function(t){this.$emit("share",t)},followFunc:function(i,e){var o=1!=e.isFollow;o?t.showToast({title:"关注成功",icon:"none"}):t.showToast({title:"取消关注",icon:"none"}),this.$emit("follow",e,o),this.$set(this.videoList,i,Object.assign(e,{isFollow:1==e.isFollow?0:1}))},out:function(){t.navigateBack()},commentFabulous:function(t,i,e){console.log("level",t),console.log("item",i),console.log("index",e);var o="1"==i.isFabulous?"0":"1";i.isFabulous=o,this.$axios({url:this.$url[51],data:{changeStatus:1,id:i.userId,status:0,type:2}}).then((function(t){console.log("res",t),0==t.code&&(i.fabulousCount="1"==o?i.fabulousCount+1:i.fabulousCount-1)})),this.$emit("commentFabulous",i)},reply:function(t,i,e,o){this.showInput=!0,this.commentPlaceholder="回复@".concat(i.userNick),this.replyIndex=o,this.replyType=t,this.replyParentIndex=e,this.replyObj=i},commentCommit:function(){var i=this;if(""==this.replyContent.trim())return this.replyContent="",void t.showToast({title:"评论不能为空",icon:"none"});this.showInput=!1,this.$axios({url:this.$url[53],data:{comment_id:0,content:this.replyContent,id:this.videoList[this.currentIndex].id,type:1}}).then((function(t){console.log(t)})),this.$axios({url:this.$url[6]}).then((function(t){if(0==t.code){var e=new Date,o=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),r=e.getHours(),a=e.getMinutes(),u=e.getSeconds();n=n>9?n:"0"+n,s=s>9?s:"0"+s,r=r>9?r:"0"+r,a=a>9?a:"0"+a,u=u>9?u:"0"+u;var c="".concat(o,"-").concat(n,"-").concat(s," ").concat(r,":").concat(a,":").concat(u);i.currentComment.list.push({userHead:t.data.avatar_url,userNick:t.data.nick,content:i.replyContent,fabulousCount:0,time:c}),console.log(i.currentComment.list),i.replyContent="",i.currentComment.count++,i.videoList[i.currentIndex].commentCount++,i.$nextTick((function(){this.numberwhich=500*this.currentComment.list.length}))}}))},commentBlur:function(){this.commentPlaceholder="说点好听的～",this.showInput=!1,this.replyType="video",this.replyObj=this.currentVideo}}};i.default=e}).call(this,e("df3c")["default"])},"27a7":function(t,i,e){"use strict";e.r(i);var o=e("7b7d"),n=e("7676");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("f5483");var r=e("828b"),a=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"afda619c",null,!1,o["a"],void 0);i["default"]=a.exports},"5dae":function(t,i,e){},7676:function(t,i,e){"use strict";e.r(i);var o=e("0862"),n=e.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},"7b7d":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement,e=(t._self._c,t.common.imgUrl("/static/images/right.png")),o=t.__map(t.videoList,(function(i,e){var o=t.__get_orig(i),n=t.common.imgUrl(i.videoUrl),s=t.common.imgUrl(i.videoUrl),r=t.common.imgUrl(i.userHead),a=0==i.isFollow?t.common.imgUrl("/static/case/collection1.png"):null,u=0!=i.isFollow?t.common.imgUrl("/static/case/collection2.png"):null;return{$orig:o,g0:n,g1:s,g3:r,g4:a,g5:u}})),n=t.videoList.length,s=t.videoList.length,r=t.__map(t.currentComment.list,(function(i,e){var o=t.__get_orig(i),n=t.common.imgUrl(i.userHead);return{$orig:o,g8:n}}));t.$mp.data=Object.assign({},{$root:{g2:e,l0:o,g6:n,g7:s,l1:r}})},n=[]},f5483:function(t,i,e){"use strict";var o=e("5dae"),n=e.n(o);n.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'packgeA/components/y-video-slide/y-video-slide-create-component',
    {
        'packgeA/components/y-video-slide/y-video-slide-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("27a7"))
        })
    },
    [['packgeA/components/y-video-slide/y-video-slide-create-component']]
]);
