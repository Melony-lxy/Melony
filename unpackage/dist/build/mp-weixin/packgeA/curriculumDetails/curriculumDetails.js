require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packgeA/curriculumDetails/curriculumDetails"],{"0de0":function(t,e,i){"use strict";var n=i("4b54"),o=i.n(n);o.a},4808:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("6103");n(i("3240"));var o=n(i("9f45"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"4b54":function(t,e,i){},"661a":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("babc"),o={WECHAT:1,WECHAT_CH:"微信",ALIPAY:2,ALIPAY_CH:"支付宝"},s={filters:{whichPeople:function(t){switch(t){case 0:return"本人";case 1:return"儿子";case 2:return"女儿";case 3:return"孙子";case 4:return"孙女";case 5:return"父亲";case 6:return"母亲";case 7:return"爷爷";case 8:return"奶奶";case 9:return"姥爷";case 10:return"姥姥"}}},onPageScroll:function(e){var i=e.scrollTop,n=t.getWindowInfo();if(i>n.screenHeight/4)this.transparency=0;else{var o=n.screenHeight/4-i;this.transparency=o/(n.screenHeight/4)}},components:{curriculumItem:function(){i.e("packgeA/components/curriculumItem").then(function(){return resolve(i("8ab7"))}.bind(null,i)).catch(i.oe)},share:function(){i.e("components/share/share").then(function(){return resolve(i("39dc"))}.bind(null,i)).catch(i.oe)},QrcodePoster:function(){Promise.all([i.e("common/vendor"),i.e("components/zhangyu-qrcode-poster/zhangyu-qrcode-poster")]).then(function(){return resolve(i("7d0a"))}.bind(null,i)).catch(i.oe)},aliplayer:function(){i.e("packgeA/components/aliplayer").then(function(){return resolve(i("bf48"))}.bind(null,i)).catch(i.oe)},storeInformation:function(){i.e("components/storeInformation").then(function(){return resolve(i("33b5"))}.bind(null,i)).catch(i.oe)}},onUnload:function(){""!=this.$store.state.peopletype&&(t.reLaunch({url:"/pages/my/my"}),this.$store.commit("changetype",""))},data:function(){return{value1:"",state:!1,state1:!1,state2:!1,state3:!1,transparency:1,QrcodePoster:!1,classList:[],extraIcon:{color:"#4cd964",size:"26",type:"image"},isShow:!1,is_show_model:!0,content:"",id:0,communicationId:0,details:{},curriculumType:["1v1","班课","试听","视频课"],show:!1,show1:!1,courseShow:!1,isPurchase:!1,tablist:[],current:0,peopleList:[],showpeopleList:!0,people:{},showList:!0,showPeople:!1,courseList:[],payment_class:1,paymentList:[{id:o.WECHAT,img:this.common.imgUrl("/static/wechat.png"),name:o.WECHAT_CH,styles:"width:30rpx;height:30rpx"}],payment:0,showvideo:!1,pageNum1:5,pageNum2:5,pageNum3:5,pageNum4:5,videoId:"",selectClass:null,selectPage:null,shareData:{},h5Wx:!1,htmlload:"",code:"",isLogin:!1,isios:!1,flag:!1,uid:-1,newreMarks:""}},onShareAppMessage:function(t){return{title:this.details.name,imageUrl:this.common.imgUrl(this.details.img),path:"/packgeA/login/login?"+this.details.param}},onShareTimeline:function(){return{title:this.details.name,imageUrl:this.common.imgUrl(this.details.img),path:"/packgeA/login/login?"+this.details.param}},onLoad:function(e){var i=this;this.code=e.code,this.paymentList=[{id:o.WECHAT,img:this.common.imgUrl("/static/wechat.png"),name:o.WECHAT_CH,styles:"width:30rpx;height:30rpx"}],this.h5Wx=!1,t.createVideoContext("player"),this.id=e.id,setTimeout((function(){i.content=i.details.introduce,i.$nextTick((function(){i.$refs.uReadMore.init()}))}),1e3),e.communicationId&&(this.communicationId=e.communicationId)},onShow:function(){var e=this;t.getSystemInfo({success:function(t){"ios"==t.platform?e.$axios({url:e.$url[103]}).then((function(t){e.isios=t.data})):e.isios=!0}}),(0,n.verifyLogin)().then((function(t){0==t.code?e.isLogin=!0:e.isLogin=!1})),this.tablist=[],this.$nextTick((function(){this.getDetails(this.id),this.change(0)}))},onReachBottom:function(){},methods:{AddNew:function(){var e=this;""!=this.newreMarks?this.$axios({url:this.$url[109],data:{teacherUid:this.uid,content:this.newreMarks}}).then((function(i){e.newreMarks="",t.showToast({title:"评价成功",icon:"none"}),setTimeout((function(){e.show1=!1}),1e3)})):this.$u.toast("请填写评价")},Change1:function(){this.state2=!this.state2,this.state3=!this.state3},Change:function(){this.state=!this.state,this.state1=!this.state1},ToCustomerService1:function(){this.isLogin?t.navigateTo({url:"/pagesShop/chat/index?id="+this.$mp.query.id}):(t.showToast({icon:"none",title:"请登录",position:"bottom"}),setTimeout((function(e){t.reLaunch({url:"/packgeA/login/login"})}),1e3))},ToCustomerService2:function(){this.isLogin?t.switchTab({url:"/pages/index/index"}):(t.showToast({icon:"none",title:"请登录",position:"bottom"}),setTimeout((function(e){t.reLaunch({url:"/packgeA/login/login"})}),1e3))},ToCustomerService:function(){this.isLogin?this.isPurchase=!0:(t.showToast({icon:"none",title:"请登录",position:"bottom"}),setTimeout((function(e){t.reLaunch({url:"/packgeA/login/login"})}),1e3))},showQrcodePoster:function(){this.QrcodePoster=!1},sharePoster:function(){this.is_show_model=!1,this.QrcodePoster=!0},getvideo:function(e,i,n){e?(this.showvideo=!1,this.$nextTick((function(){this.showvideo=!0,this.videoId=e,this.selectPage=i,this.selectClass=n}))):t.showToast({title:"暂未上传视频",icon:"none"})},changefree:function(t){var e=!1;if(void 0!=t.children)for(var i=0;i<t.children.length;i++)1==t.children[i].is_free&&(e=!0);if(1==e){for(var n=!1,o=[],s=0;s<this.classList.length;s++)this.classList[s]==t.id&&(n=!0,o.push(s));if(n)if(1==o.length)this.classList.splice(o[0],1);else for(var a=0,c=0;c<o.length;c++)this.classList.splice(o[c-a],1),a++;else this.classList.push(t.id)}var r=this.details.chapterSection[0].length-1,u=this.details.chapterSection[0];t==u[r]&&setTimeout((function(){document.documentElement.scrollTop+=40}),500)},judge:function(t){var e=!1;return this.classList.forEach((function(i){i==t.id&&(e=!0)})),e},choosePeople:function(t){this.showList=!1,this.showpeopleList=!1;var e=this.peopleList[t];this.peopleList[t]=this.people,this.people=e,this.$nextTick((function(){this.showList=!0,this.showpeopleList=!0}))},getPeople:function(){var t=this;this.$axios({url:this.$url[66]}).then((function(e){0==e.code&&(console.log("people",e),1==e.data.length?(t.people=e.data[0],t.showpeopleList=!1):(e.data[0].member_type=0,t.people=e.data[0],e.data.splice(0,1),t.peopleList=e.data))}))},share:function(){this.isShow=!0},hide:function(t){this.isShow=t},load:function(){this.$refs.uReadMore.init()},seeImg:function(e){console.log(this.common.imgUrl(this.details.img));var i=[];i[0]=this.common.imgUrl(this.details.img),console.log(i,"imgsArray"),t.previewImage({current:0,urls:i})},gotop:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,i=setInterval((function(){document.body.scrollTop=document.documentElement.scrollTop=e-=50,e<=0&&clearInterval(i)}),10);t.showToast({title:"视频播放中",icon:"none"})},getCurricuId:function(t){console.log(t),this.id=t,this.getDetails()},change:function(t){if(console.log("111"),this.current=t,void 0!=this.details.chapterSection){var e=this.details.chapterSection[0];this.classList=[];for(var i=0;i<e.length;i++){var n;if(n=e[i].children,void 0!=n)for(var o=0;o<n.length;o++)1==e[i].children[o].is_free&&this.classList.push(e[i].id)}}},consulting:function(){this.show=!0},consulting1:function(t){this.uid=t.uid,this.show1=!0},clickPayment:function(t){this.payment=t},getDetails:function(e){var i=this;this.common.loading(),this.$axios({url:this.$url[7],data:{id:this.id}}).then((function(n){if(0==n.code){if(i.details=n.data,0!=i.details.uid&&i.getPeople(),i.shareData={id:e,title:n.data.name,instructions:n.data.introduce,img:n.data.img},""!=i.details.content&&(i.pageNum1=0,i.tablist.push({name:"课程介绍"})),void 0!=i.details.chapterSection[0][0]&&(i.pageNum2=i.tablist.length,i.tablist.push({name:"课程大纲"})),""!=i.details.teacher&&(i.pageNum3=i.tablist.length,i.tablist.push({name:"上课讲师"})),i.getCourseList(),i.payment_class=0===n.data.class_status?n.data.positive_class:n.data.first_phase_class,void 0!=n.data.chapterSection)for(var o=n.data.chapterSection[0],s=0;s<o.length;s++){var a;if(a=o[s].children,void 0!=a)for(var c=0;c<a.length;c++)1==o[s].children[c].is_free&&i.classList.push(o[s].id)}t.hideLoading()}}))},numberChange:function(t){this.payment_class=t.value},getCourseList:function(){var t=this;this.$axios({url:this.$url[9],data:{query:{is_recommend:1}}}).then((function(e){0==e.code&&(t.courseList=e.data.data,""!=t.courseList&&(t.pageNum4=t.tablist.length,t.tablist.push({name:"推荐课程"})))}))},addOrder:function(){var e=this;t.showLoading({title:"加载中"});var i=this.paymentList[this.payment].id;this.$axios({url:this.$url[10],data:{cid:this.id,payment:i,member_id:this.people.id,communicationId:this.communicationId,invitation_code:this.code}}).then((function(n){if(t.hideLoading(),0==n.code){if(n.data.is_gratis)return e.isPurchase=!1,void t.showModal({title:"提示",content:"报名成功",showCancel:!1,confirmText:"关闭",success:function(e){t.navigateTo({url:"/packgeA/myOrder/myOrder"})}});if(e.isPurchase=!1,i===o.WECHAT){e.$axios({url:e.$url[33],data:{id:n.data.id,status:0,payment_class:e.payment_class,openId:t.getStorageSync("openId")}}).then((function(i){0===i.code&&e.common.payment(i.data).then((function(e){0===e.code&&t.showModal({title:"提示",content:"支付成功",showCancel:!1,confirmText:"关闭",success:function(e){t.navigateTo({url:"/packgeA/myOrder/myOrder"})}})})).catch((function(t){}))}))}else i===o.ALIPAY&&e.$axios({url:e.$url[70],data:{id:n.data.id,payment_class:e.payment_class}}).then((function(e){t.hideLoading(),document.querySelector("body").innerHTML=e.data.resp,document.forms[0].submit()})).catch((function(){t.hideLoading()}))}}))}}};e.default=s}).call(this,i("df3c")["default"])},"994e":function(t,e,i){"use strict";i.r(e);var n=i("661a"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"9f45":function(t,e,i){"use strict";i.r(e);var n=i("fd53"),o=i("994e");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("0de0");var a=i("828b"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"00fdcb58",null,!1,n["a"],void 0);e["default"]=c.exports},fd53:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uReadMore:function(){return i.e("uview-ui/components/u-read-more/u-read-more").then(i.bind(null,"af07"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"6517"))},uniCollapse:function(){return i.e("uni_modules/uni-collapse/components/uni-collapse/uni-collapse").then(i.bind(null,"97cf"))},uniCollapseItem:function(){return i.e("uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item").then(i.bind(null,"74b9"))},uModal:function(){return i.e("uview-ui/components/u-modal/u-modal").then(i.bind(null,"31b2"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"aa1b"))},uniIcons:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(i.bind(null,"dec5"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"203b"))},uNumberBox:function(){return i.e("uview-ui/components/u-number-box/u-number-box").then(i.bind(null,"dcb0"))},share:function(){return i.e("components/share/share").then(i.bind(null,"39dc"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.showvideo?null:t.common.imgUrl(t.details.img)),n=t.common.imgUrl("/static/icon/kj.png"),o=t.details.give_class?t.common.imgUrl("/static/icon/lw.png"):null,s=t.current==t.pageNum1?t.common.content(t.details.content):null,a=t.current==t.pageNum2&&void 0!=t.details.chapterSection[0][0]?t.__map(t.details.chapterSection[0],(function(e,i){var n=t.__get_orig(e),o=t.judge(e),s=t.__map(e.children,(function(e,n){var o=t.__get_orig(e),s=t.selectClass==i&&t.selectPage==n?t.common.imgUrl("/static/images/stop.png"):null,a=t.selectClass==i&&t.selectPage==n||e.is_free||!t.details.paymentVideo?null:t.common.imgUrl("/static/images/classplay.png");return{$orig:o,g4:s,g5:a}}));return{$orig:n,m0:o,l0:s}})):null,c=t.current==t.pageNum3?t.__map(t.details.teacher,(function(e,i){var n=t.__get_orig(e),o=t.common.imgUrl(e.user.avatar_url);return{$orig:n,g6:o}})):null,r=t.common.imgUrl("/static/share.png"),u=t.details.org&&t.details.org.qr_code?t.common.imgUrl(t.details.org.qr_code):null,l=t.common.imgUrl(t.details.img),h=t._f("whichPeople")(t.people.member_type),d=t.showpeopleList&&t.showList?t.__map(t.peopleList,(function(e,i){var n=t.__get_orig(e),o=t._f("whichPeople")(e.member_type);return{$orig:n,f1:o}})):null,m=t.details.is_class_representive?parseInt(t.details.settlement_proportion):null,p=t.common.imgUrl("/static/images/service.png"),g=t.common.imgUrl("/static/images/home.png");t._isMounted||(t.e0=function(e){t.flag=!0},t.e1=function(){t.show=!1}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:o,g3:s,l1:a,l2:c,g7:r,g8:u,g9:l,f0:h,l3:d,m1:m,g10:p,g11:g}})},s=[]}},[["4808","common/runtime","common/vendor"]]]);