{"version":3,"sources":["webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?de16","webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?5dc1","webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?d92c","webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?4b75","uni-app:///components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue","webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?4e5c","webpack:///D:/Melony/千芒/duvclub.7mango.cn-vue/components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue?c6bc"],"names":["props","headerImg","type","title","subTitle","price","abImg","url","default","item","show","data","canvasW","canvasH","ctx","isShow","qrcode","img","tempFilePath","userimg","text","canvasImg","showCanva","watch","methods","shopImg","circleImgOne","getVip","getimg","showCanvas","__init","uni","mask","hW","hH","upx2px","qrcodeImg","setTimeout","drawEmptyRound","drawDashLine","xpos","ypos","numDashes","drawRoundImg","console","drawRoundRect","getImageInfo","src","success","resolve","fail","reject","saveImage","canvasId","quality","complete","filePath","icon","duration","that"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8I;AAC9I;AACyE;AACL;AACsC;;;AAG1G;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,2FAAM;AACR,EAAE,4GAAM;AACR,EAAE,qHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gHAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAqzB,CAAgB,mzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCWz0B;EACAA;IACAC;MACAC;IACA;IACAC;MACAD;IACA;IACAE;MACAF;IACA;IACAG;MACAH;IACA;IACAI;MACAJ;IACA;IACAK;MACAL;MACAM;IACA;IACAC;IACAP;IACAQ;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAb;MACA;QACA;MACA;IACA;EACA;EACA;EACA;EACA;EACAc;IACAC;MACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACAZ;MACA;MACA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IACAa;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;UACArB;UACAI;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAkB;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACA5B;kBACA6B;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA/B;gBACAgC;gBACAC,sBACA;gBACA,0GACAA;gBACA;gBACA;gBACA;gBACA,sDACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,wGACAC;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA,wGACAL;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACAM;kBACA,mCAcA;kBACAN;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAO;MACAxB;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IACA;IACAyB;MACAzB;MACAA;MACA;QACA0B;QAAA;QACAC;QAAA;QACAC;MACA;MACA;QACA;UACA5B;UACA;QACA;UACAA;QACA;MACA;MACAA;IACA;IACA;IACA6B;MACAC;MACA9B;MACAA;MACA;MACAA;MACA;MACAA;MACA;MACAA;MACA;MACAA;MACAA;MACAA;MACA;MACA;MACAA;MACAA;MACAA;IACA;IACA;IACA+B;MACA/B;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IACA;IACAgC;MACA;MACA;QACAf;UACAgB;UACAC;YACAC;YACAL;UACA;UACAM;YACAC;YACAP;UACA;QACA;MACA;IACA;IAEA;IACAQ;MACA;MACArB;QACAiB;UACAJ;UACA;YACA;YACA;cACA;cACAb;gBACAiB;kBACAJ;gBACA;cACA;YACA;cACA;gBACA;gBACAb;kBACAiB;oBACAJ;kBACA;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA;MACA;MACAb;QACAsB;QACAC;QACAC;UACAX;UACAb;YACAyB;YACAR;cACAjB;gBACA5B;gBACAsD;gBACAC;cACA;cACArB;gBACAsB;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnWA;AAAA;AAAA;AAAA;AAAohD,CAAgB,08CAAG,EAAC,C;;;;;;;;;;;ACAxiD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./zhangyu-qrcode-poster.vue?vue&type=template&id=36e0a27d&scoped=true&\"\nvar renderjs\nimport script from \"./zhangyu-qrcode-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./zhangyu-qrcode-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zhangyu-qrcode-poster.vue?vue&type=style&index=0&id=36e0a27d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36e0a27d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/zhangyu-qrcode-poster1/zhangyu-qrcode-poster.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zhangyu-qrcode-poster.vue?vue&type=template&id=36e0a27d&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.isShow && !_vm.showCanva ? _vm.canvasImg.replace(/[\\r\\n]/g, \"\") : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zhangyu-qrcode-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zhangyu-qrcode-poster.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"contentt\" v-if=\"isShow\" @click.stop=\"shopImg()\">\r\n\t\t<canvas @click.stop=\"\" :style=\"{ width: canvasW + 'px', height: canvasH + 'px' }\" canvas-id=\"my-canvas\"\r\n\t\t\tv-if=\"showCanva\"></canvas>\r\n\t\t<image :src=\"canvasImg.replace(/[\\r\\n]/g,'')\" mode=\"widthFix\" v-else></image>\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<view class=\"save-btn\" @click.stop=\"saveImage\">保存图片</view>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\theaderImg: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\ttitle: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\tsubTitle: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\tprice: {\r\n\t\t\t\ttype: Number\r\n\t\t\t},\r\n\t\t\tabImg: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\turl: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\titem: Number,\r\n\t\t\ttype: String,\r\n\t\t\tshow: Boolean\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanvasW: 0,\r\n\t\t\t\tcanvasH: 0,\r\n\t\t\t\tctx: null,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\tqrcode: '',\r\n\t\t\t\timg: '',\r\n\t\t\t\ttempFilePath: '',\r\n\t\t\t\tuserimg: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\tcanvasImg: '',\r\n\t\t\t\tshowCanva: true\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tshow(newValue, oldValue) {\r\n\t\t\t\tif (newValue) {\r\n\t\t\t\t\tthis.getVip()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// destroyed() {\r\n\t\t// \tthis.type = ''\r\n\t\t// },\r\n\t\tmethods: {\r\n\t\t\tshopImg() {\r\n\t\t\t\tthis.isShow = false\r\n\t\t\t\tthis.$emit('show')\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\t *  参数说明\r\n\t\t\t *  ctx Canvas实例\r\n\t\t\t *  img 图片地址\r\n\t\t\t *   x  x轴坐标\r\n\t\t\t *   y  y轴坐标\r\n\t\t\t *   r  圆形半径\r\n\t\t\t */\r\n\t\t\tcircleImgOne(ctx, img, x, y, r) {\r\n\t\t\t\t// 如果在绘制图片之后还有需要绘制别的元素，需启动 save() 、restore() 方法，否则 clip() 方法会导致之后元素都不可见\r\n\t\t\t\t//    save()：保存当前 Canvas 画布状态\r\n\t\t\t\t// restore()：恢复到保存时的状态\r\n\t\t\t\tctx.save();\r\n\t\t\t\tlet d = r * 2;\r\n\t\t\t\tlet cx = x + r;\r\n\t\t\t\tlet cy = y + r;\r\n\t\t\t\tctx.arc(cx, cy, r, 0, 2 * Math.PI);\r\n\t\t\t\tctx.strokeStyle = '#FFF'; // 设置绘制圆形边框的颜色\r\n\t\t\t\tctx.clip();\r\n\t\t\t\tctx.drawImage(img, x, y, d, d);\r\n\t\t\t\tctx.stroke(); // 绘制出圆形，默认为黑色，可通过 ctx.strokeStyle = '#FFFFFF'， 设置想要的颜色\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\tgetVip() {\r\n\t\t\t\tthis.getimg()\r\n\t\t\t},\r\n\t\t\tgetimg() {\r\n\t\t\t\tlet data = ''\r\n\t\t\t\t// if (this.type == 'type') {\r\n\t\t\t\t// \tthis.text = '—— 分享课程 ——'\r\n\t\t\t\t// \tdata = {\r\n\t\t\t\t// \t\ttype: this.item\r\n\t\t\t\t// \t}\r\n\t\t\t\t// } else if (this.type == 'id') {\r\n\t\t\t\t// \tthis.text = '—— 添加成员 ——'\r\n\t\t\t\t// \tdata = {\r\n\t\t\t\t// \t\tid: this.item\r\n\t\t\t\t// \t}\r\n\t\t\t\t// } else if (this.type == 'page') {\r\n\t\t\t\t// \tthis.text = '—— 分享动态 ——'\r\n\t\t\t\t// \tdata = {\r\n\t\t\t\t// \t\tpage: this.item\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t\tif (this.url) {\r\n\t\t\t\t\tthis.img = this.url\r\n\t\t\t\t\tthis.showCanvas(this.headerImg)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\turl: this.$url[87],\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tthis.img = res.data.qrcode\r\n\t\t\t\t\t\t\tthis.showCanvas(this.headerImg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//显示\r\n\t\t\tshowCanvas(qrcode) {\r\n\t\t\t\tthis.isShow = true\r\n\t\t\t\tthis.qrcode = qrcode\r\n\t\t\t\tthis.__init()\r\n\t\t\t},\r\n\t\t\t//初始化画布\r\n\t\t\tasync __init() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.ctx = uni.createCanvasContext('my-canvas', this)\r\n\t\t\t\tthis.canvasW = uni.upx2px(550);\r\n\t\t\t\tthis.canvasH = uni.upx2px(780);\r\n\t\t\t\t//设置画布背景透明\r\n\t\t\t\tthis.ctx.setFillStyle('rgba(255, 255, 255, 0)')\r\n\t\t\t\t//设置画布大小\r\n\t\t\t\tthis.ctx.fillRect(0, 0, this.canvasW, this.canvasH)\r\n\t\t\t\t//绘制圆角背景\r\n\t\t\t\tthis.drawRoundRect(this.ctx, 0, 0, this.canvasW, this.canvasH, uni.upx2px(18), '#FFFFFF')\r\n\t\t\t\t//获取标题图片\r\n\t\t\t\tlet headerImg = await this.getImageInfo(this.headerImg)\r\n\t\t\t\tlet hW = uni.upx2px(500);\r\n\t\t\t\tlet hH = uni.upx2px(320);\r\n\t\t\t\t//绘制标题图\r\n\t\t\t\tthis.drawRoundImg(this.ctx, headerImg.path, ((this.canvasW - hW) / 2), ((this.canvasW - hW) / 2), hW,\r\n\t\t\t\t\thH, uni.upx2px(16))\r\n\t\t\t\t//绘制标题\r\n\t\t\t\tthis.ctx.setFontSize(this.canvasW / 15); //设置标题字体大小\r\n\t\t\t\tthis.ctx.setFillStyle('#333'); //设置标题文本颜色\r\n\t\t\t\tthis.ctx.fillText(this.title, (this.canvasW / 3), (\r\n\t\t\t\t\t((this.canvasW - hW) / 2) + hH + uni.upx2px(80)))\r\n\t\t\t\t//绘制副标题\r\n\t\t\t\t// this.ctx.setFontSize(14);\r\n\t\t\t\t// this.ctx.setFillStyle('#858585');\r\n\t\t\t\t// let sWidth = this.ctx.measureText(this.subTitle).width\r\n\t\t\t\t// if (sWidth > hW) {\r\n\t\t\t\t// \tthis.ctx.fillText(this.subTitle.slice(0, 17) + '...', ((this.canvasW - hW) / 2), (\r\n\t\t\t\t// \t\t((this.canvasW - hW) / 2) + hH + uni.upx2px(110)))\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tthis.ctx.fillText(this.subTitle, ((this.canvasW - hW) / 2), (\r\n\t\t\t\t// \t\t((this.canvasW - hW) / 2) + hH + uni.upx2px(110)))\r\n\t\t\t\t// }\r\n\t\t\t\t//绘制价格\r\n\t\t\t\t// this.ctx.setFontSize(14);\r\n\t\t\t\t// this.ctx.setFillStyle('#f54545');\r\n\t\t\t\t// this.ctx.fillText('￥',((this.canvasW-hW) / 2),(\r\n\t\t\t\t// ((this.canvasW-hW) / 2) + hH + uni.upx2px(180)))\r\n\t\t\t\t// this.ctx.setFontSize(18);\r\n\t\t\t\t// this.ctx.fillText(this.price,(((this.canvasW-hW) / 2) + uni.upx2px(36)),(\r\n\t\t\t\t// ((this.canvasW-hW) / 2) + hH + uni.upx2px(180)))\r\n\t\t\t\t//绘制虚线\r\n\t\t\t\t// this.drawDashLine(this.ctx, uni.upx2px(20), (((this.canvasW - hW) / 2) + hH + uni.upx2px(240)), (this\r\n\t\t\t\t// \t.canvasW - uni.upx2px(20)), (((this.canvasW - hW) / 2) + hH + uni.upx2px(240)), 5)\r\n\t\t\t\t//左边实心圆\r\n\t\t\t\tthis.drawEmptyRound(this.ctx, 0, (((this.canvasW - hW) / 2) + hH + uni.upx2px(300)), uni.upx2px(20))\r\n\t\t\t\t//右边实心圆\r\n\t\t\t\tthis.drawEmptyRound(this.ctx, this.canvasW, (((this.canvasW - hW) / 2) + hH + uni.upx2px(300)), uni\r\n\t\t\t\t\t.upx2px(20))\r\n\t\t\t\t//提示文案\r\n\t\t\t\tthis.ctx.setFontSize(this.canvasW / 23);\r\n\t\t\t\tthis.ctx.setFillStyle('#858585');\r\n\t\t\t\tthis.ctx.fillText('长按保存图片或者扫描二维码', (this.canvasW / 4.3), (this.canvasW / 0.75))\r\n\t\t\t\t//底部广告\r\n\t\t\t\t// let BottomAdImg = await this.getImageInfo(this.abImg)\r\n\t\t\t\t// this.ctx.drawImage(BottomAdImg.path,(((this.canvasW-hW) / 2)),(((this.canvasW-hW) / 2) + hH + uni.upx2px(310)),uni.upx2px(350),uni.upx2px(110))\r\n\t\t\t\t//小程序码\r\n\t\t\t\tlet qrcodeImg = await this.getImageInfo(this.img)\r\n\t\t\t\tthis.ctx.drawImage(qrcodeImg.path, uni.upx2px(168), (((this.canvasW - hW) / 2) + hH + uni.upx2px(120)),\r\n\t\t\t\t\tuni.upx2px(220), uni.upx2px(220))\r\n\t\t\t\t//绘制用户头像\r\n\t\t\t\t// let userImg = await this.getImageInfo(this.userimg)\r\n\t\t\t\t// this.ctx.fillStyle = \"#FFFFFF\";\r\n\t\t\t\t// this.ctx.fillRect(0, 0, uni.upx2px(0), uni.upx2px(0));\r\n\t\t\t\t// this.circleImgOne(this.ctx, userImg.path, uni.upx2px(225), uni.upx2px(300), uni.upx2px(50));\r\n\t\t\t\t//延迟渲染\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.ctx.draw(true, () => {\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tlet _this = this\r\n\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\tcanvasId: 'my-canvas',\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t// 在H5平台下，tempFilePath 为 base64\r\n\t\t\t\t\t\t\t\t_this.showCanva = false\r\n\t\t\t\t\t\t\t\t_this.canvasImg = res.tempFilePath\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\t//绘制实心圆\r\n\t\t\tdrawEmptyRound(ctx, x, y, radius) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(x, y, radius, 0, 2 * Math.PI, true);\r\n\t\t\t\tctx.setFillStyle('rgba(0, 0, 0, .4)')\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore()\r\n\t\t\t\tctx.closePath()\r\n\t\t\t},\r\n\t\t\t//绘制虚线\r\n\t\t\tdrawDashLine(ctx, x1, y1, x2, y2, dashLength) {\r\n\t\t\t\tctx.setStrokeStyle(\"#cccccc\") //设置线条的颜色\r\n\t\t\t\tctx.setLineWidth(1) //设置线条宽度\r\n\t\t\t\tvar dashLen = dashLength,\r\n\t\t\t\t\txpos = x2 - x1, //得到横向的宽度;\r\n\t\t\t\t\typos = y2 - y1, //得到纵向的高度;\r\n\t\t\t\t\tnumDashes = Math.floor(Math.sqrt(xpos * xpos + ypos * ypos) / dashLen);\r\n\t\t\t\t//利用正切获取斜边的长度除以虚线长度，得到要分为多少段;\r\n\t\t\t\tfor (var i = 0; i < numDashes; i++) {\r\n\t\t\t\t\tif (i % 2 === 0) {\r\n\t\t\t\t\t\tctx.moveTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) * i);\r\n\t\t\t\t\t\t//有了横向宽度和多少段，得出每一段是多长，起点 + 每段长度 * i = 要绘制的起点；\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.lineTo(x1 + (xpos / numDashes) * i, y1 + (ypos / numDashes) * i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t},\r\n\t\t\t//带圆角图片\r\n\t\t\tdrawRoundImg(ctx, img, x, y, width, height, radius) {\r\n\t\t\t\tconsole.log('height', height)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.save()\r\n\t\t\t\t// 左上角\r\n\t\t\t\tctx.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 1.5)\r\n\t\t\t\t// 右上角\r\n\t\t\t\tctx.arc(x + width - radius, y + radius, radius, Math.PI * 1.5, Math.PI * 2)\r\n\t\t\t\t// 右下角\r\n\t\t\t\tctx.arc(x + width - radius, y + height - radius, radius, 0, Math.PI * 0.5)\r\n\t\t\t\t// 左下角\r\n\t\t\t\tctx.arc(x + radius, y + height - radius, radius, Math.PI * 0.5, Math.PI)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.clip()\r\n\t\t\t\tlet h = height + 100\r\n\t\t\t\tlet w = width\r\n\t\t\t\tctx.drawImage(img, x, y, w, h);\r\n\t\t\t\tctx.restore()\r\n\t\t\t\tctx.closePath()\r\n\t\t\t},\r\n\t\t\t//圆角矩形\r\n\t\t\tdrawRoundRect(ctx, x, y, width, height, radius, color) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.setFillStyle(color);\r\n\t\t\t\tctx.setStrokeStyle(color)\r\n\t\t\t\tctx.setLineJoin('round'); //交点设置成圆角\r\n\t\t\t\tctx.setLineWidth(radius);\r\n\t\t\t\tctx.strokeRect(x + radius / 2, y + radius / 2, width - radius, height - radius);\r\n\t\t\t\tctx.fillRect(x + radius, y + radius, width - radius * 2, height - radius * 2);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.closePath();\r\n\t\t\t},\r\n\t\t\t//获取图片\r\n\t\t\tgetImageInfo(imgSrc) {\r\n\t\t\t\tlet url = this.common.imgUrl(imgSrc) + '?t=' + new Date().getTime();\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: url,\r\n\t\t\t\t\t\tsuccess: (image) => {\r\n\t\t\t\t\t\t\tresolve(image);\r\n\t\t\t\t\t\t\tconsole.log('获取图片成功', image)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t\t\tconsole.log('获取图片失败', err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//保存图片到相册\r\n\t\t\tsaveImage() {\r\n\t\t\t\t//判断用户授权\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('获取用户权限', res.authSetting)\r\n\t\t\t\t\t\tif (Object.keys(res.authSetting).length > 0) {\r\n\t\t\t\t\t\t\t//判断是否有相册权限\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.writePhotosAlbum'] == undefined) {\r\n\t\t\t\t\t\t\t\t//打开设置权限\r\n\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('设置权限', res.authSetting)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t\t\t\t//打开设置权限\r\n\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('设置权限', res.authSetting)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'my-canvas',\r\n\t\t\t\t\tquality: 1,\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\tconsole.log('保存到相册', res);\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '已保存到相册',\r\n\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthat.isShow = false\r\n\t\t\t\t\t\t\t\t}, 2000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.contentt {\r\n\t\tposition: fixed;\r\n\t\tz-index: 2;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground: rgba(0, 0, 0, .4);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\t.save-btn {\r\n\t\t\tmargin-top: 35rpx;\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t\tbackground: linear-gradient(to right, #FE726B, #FE956B);\r\n\t\t\tpadding: 15rpx 40rpx;\r\n\t\t\tborder-radius: 50rpx;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zhangyu-qrcode-poster.vue?vue&type=style&index=0&id=36e0a27d&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zhangyu-qrcode-poster.vue?vue&type=style&index=0&id=36e0a27d&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1736315603198\n      var cssReload = require(\"D:/Downloads/HBuilderX.3.4.18.20220630/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}